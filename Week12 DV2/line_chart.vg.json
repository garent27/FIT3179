{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Fastest Solve Each Year by Top 5 Countries",
    "fontSize": 26,
    "anchor": "start",
    "color": "black",
    "offset": 50
  },
  "width": 800,
  "height": 350,
  "background": "transparent",
  "data": {
    "url": "data/fastest_3x3_top5countries.csv"
  },
  "layer": [
    {
      "params": [
        {
          "name": "country_selection",
          "select": {"type": "point", "fields": ["country"]},
          "bind": "legend"
        }
      ],
      "mark": {
        "type": "line",
        "point": true,
        "strokeWidth": 3
      },
      "encoding": {
        "x": {
          "field": "year",
          "type": "ordinal",
          "title": "Year",
          "axis": {
            "labelAngle": 0,
            "grid": false
          }
        },
        "y": {
          "field": "fastest_seconds",
          "type": "quantitative",
          "title": "Fastest Time (seconds)",
          "scale": {
            "domain": [0, 9],
            "nice": true
          },
          "axis": {
            "grid": true,
            "gridDash": [2, 2]
          }
        },
        "color": {
          "field": "country",
          "type": "nominal",
          "title": "Country",
          "scale": {
            "domain": ["China", "Netherlands", "Poland", "Australia", "United States"],
            "range": ["#FF0000", "#27F5C5", "#FFA500", "#1f77b4", "#c19ee0"]
          },
          "legend": {
            "orient": "none",
            "legendX": 550,
            "legendY": 10,
            "direction": "vertical",
            "title": "Country (Click to highlight)",
            "titleFontSize": 12,
            "labelFontSize": 11,
            "fillColor": "white",
            "strokeColor": "#ccc",
            "padding": 10,
            "cornerRadius": 5
          }
        },
        "opacity": {
          "condition": {"param": "country_selection", "value": 1},
          "value": 0.2
        },
        "strokeWidth": {
          "condition": {"param": "country_selection", "value": 4},
          "value": 2
        },
        "tooltip": [
          {"field": "country", "type": "nominal", "title": "Country"},
          {"field": "year", "type": "ordinal", "title": "Year"},
          {"field": "fastest_seconds", "type": "quantitative", "title": "Fastest Time (s)", "format": ".2f"}
        ]
      }
    },
    {
      "transform": [
        {
          "filter": "datum.year == '2018' && datum.country == 'China'"
        }
      ],
      "mark": {
        "type": "point",
        "filled": true,
        "size": 200,
        "color": "red"
      },
      "encoding": {
        "x": {"field": "year", "type": "ordinal"},
        "y": {"field": "fastest_seconds", "type": "quantitative"}
      }
    },
    {
      "transform": [
        {
          "filter": "datum.year == '2018' && datum.country == 'China'"
        }
      ],
      "mark": {
        "type": "text",
        "align": "center",
        "dx": 0,
        "dy": 15,
        "fontSize": 11,
        "fontWeight": "bold"
      },
      "encoding": {
        "x": {"field": "year", "type": "ordinal"},
        "y": {"field": "fastest_seconds", "type": "quantitative"},
        "text": {"value": "Longest lasting world record"},
        "color": {"value": "black"}
      }
    },
    {
      "transform": [
        {
          "filter": "datum.year == '2018' && datum.country == 'China'"
        }
      ],
      "mark": {
        "type": "text",
        "align": "center",
        "dx": 0,
        "dy": 30,
        "fontSize": 10
      },
      "encoding": {
        "x": {"field": "year", "type": "ordinal"},
        "y": {"field": "fastest_seconds", "type": "quantitative"},
        "text": {"value": "by Yusheng Du (3.47s)"},
        "color": {"value": "#333"}
      }
    }
  ],
  "config": {
    "view": {"stroke": "transparent"},
    "axis": {
      "labelFontSize": 11,
      "titleFontSize": 13
    }
  }
}
